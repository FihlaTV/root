// lo-th.github.io/uil/license
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.UIL=t.UIL||{})}(this,function(t){"use strict";function i(t){if(t=t||{},this.type="",this.name="proto",this.mouse=null,this.zone={x:0,y:0,w:0,h:0},this.local={x:-1,y:-1},this.main=t.main||null,this.isUI=t.isUI||!1,this.p=void 0!==t.p?t.p:v.size.p,this.w=this.isUI?this.main.size.w:v.size.w,void 0!==t.w&&(this.w=t.w),this.h=this.isUI?this.main.size.h:v.size.h,void 0!==t.h&&(this.h=t.h),this.h=this.h<11?11:this.h,this.autoWidth=!0,this.isOpen=!1,this.isGroup=!1,this.parentGroup=null,this.autoHeight=!1,this.radius=t.radius||0,this.isNumber=!1,this.mono=!1,this.isEdit=!1,this.simple=t.simple||!1,this.simple&&(this.sa=0),this.setSize(this.w),void 0!==t.sa&&(this.sa=t.sa),void 0!==t.sb&&(this.sb=t.sb),this.simple&&(this.sb=this.w-this.sa),this.sc=void 0===t.sc?47:t.sc,this.parent=null,this.val=null,this.isSend=!1,this.bg=this.isUI?this.main.bg:v.colors.background,this.bgOver=v.colors.backgroundOver,void 0!==t.bg&&(this.bg=t.bg,this.bgOver=t.bg),void 0!==t.bgOver&&(this.bgOver=t.bgOver),this.titleColor=t.titleColor||v.colors.text,this.fontColor=t.fontColor||v.colors.text,this.colorPlus=v.ColorLuma(this.fontColor,.3),this.name=t.name||"Proto",this.txt=t.name||"Proto",this.rename=t.rename||"",this.target=t.target||null,this.callback=void 0===t.callback?null:t.callback,this.endCallback=null,null===this.callback&&this.isUI&&null!==this.main.callback&&(this.callback=this.main.callback),this.c=[],this.s=[],this.c[0]=v.dom("div",v.css.basic+"position:relative; height:20px; float:left; overflow:hidden;"),this.s[0]=this.c[0].style,this.isUI&&(this.s[0].marginBottom="1px"),this.simple||(this.c[1]=v.dom("div",v.css.txt),this.s[1]=this.c[1].style,this.c[1].textContent=""===this.rename?this.txt:this.rename,this.s[1].color=this.titleColor),t.pos){this.s[0].position="absolute";for(var i in t.pos)this.s[0][i]=t.pos[i];this.mono=!0}t.css&&(this.s[0].cssText=t.css)}function s(t){i.call(this,t),this.type="bool",this.value=t.value||!1,this.buttonColor=t.bColor||v.colors.button,this.inh=t.inh||this.h;var s=~~(.5*this.h)-.5*(this.inh-2);this.c[2]=v.dom("div",v.css.basic+"background:"+v.colors.boolbg+"; height:"+(this.inh-2)+"px; width:36px; top:"+s+"px; border-radius:20px;  transition:0.1s ease-out;"),this.c[3]=v.dom("div",v.css.basic+"opasity:0, background:"+v.colors.boolbg+"; height:"+(this.inh-6)+"px; width:"+(this.inh-6)+"px; top:"+(s+2)+"px; border-radius:20px; "),this.c[4]=v.dom("div",v.css.basic+"border:1px solid "+this.buttonColor+"; height:"+(this.inh-4)+"px; width:16px; top:"+(s+1)+"px; border-radius:20px; background:"+this.buttonColor+"; transition:margin 0.1s ease-out;"),this.value&&(this.c[4].style.marginLeft="18px",this.c[2].style.background=this.fontColor,this.c[2].style.borderColor=this.fontColor),this.init()}function e(t){i.call(this,t),this.value=t.value||[this.txt],this.selected=null,this.isDown=!1,this.buttonColor=t.bColor||v.colors.button,this.isLoadButton=t.loader||!1,this.isDragButton=t.drag||!1,this.isDragButton&&(this.isLoadButton=!0),this.lng=this.value.length,this.tmp=[];for(var s=0;s<this.lng;s++)this.c[s+2]=v.dom("div",v.css.txt+"text-align:center; top:1px; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px; line-height:"+(this.h-4)+"px;"),this.c[s+2].style.color=this.fontColor,this.c[s+2].innerHTML=this.value[s];void 0!==this.c[1]&&(this.c[1].textContent=""),this.isLoadButton&&this.initLoader(),this.isDragButton&&(this.lng++,this.initDrager()),this.init()}function h(t){i.call(this,t),this.autoWidth=!1,this.buttonColor=v.colors.button,this.setTypeNumber(t),this.radius=Math.floor(.5*(this.w-20)),this.ww=this.height=2*this.radius,this.h=2*this.radius+40,this.twoPi=2*Math.PI,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=20),this.percent=0,this.c[2]=v.dom("div",v.css.txtnumber+"text-align:center; top:"+(this.height+24)+"px; width:"+this.w+"px; color:"+this.fontColor),this.c[3]=v.dom("circle",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.ww+"px; height:"+this.height+"px; ",{cx:this.radius,cy:this.radius,r:this.radius,fill:"rgba(0,0,0,0.3)"}),this.c[4]=v.dom("path",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.ww+"px; height:"+this.height+"px;",{d:this.makePath(),fill:this.fontColor}),this.c[5]=v.dom("circle",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.ww+"px; height:"+this.height+"px;",{cx:this.radius,cy:this.radius,r:.5*this.radius,fill:this.buttonColor,"stroke-width":1,stroke:v.colors.stroke}),this.init(),this.update()}function o(t){i.call(this,t),this.autoHeight=!0,this.ctype=t.ctype||"array",this.ww=this.sb,this.side=t.side||"down",this.holdTop=0,this.decal=this.h+2,this.mid=Math.floor(.5*this.ww),this.baseH=this.h,this.oldH=this.h,this.oldDiff=0,this.openHeight=0,this.offset=[],this.c[2]=v.dom("div",v.css.txt+"height:"+(this.h-4)+"px;border-radius:"+this.radius+"px; line-height:"+(this.h-8)+"px;"),this.s[2]=this.c[2].style,"up"===this.side&&(this.decal=5,this.s[2].top="auto",this.s[2].bottom="2px"),v.colorRing||v.makeColorRing(),this.c[3]=v.clone(v.colorRing),this.c[3].style.visibility="hidden",this.hsl=null,this.value="#ffffff",void 0!==t.value&&(t.value instanceof Array?this.value=v.rgbToHex(t.value):isNaN(t.value)?this.value=t.value:this.value=v.hexToHtml(t.value)),this.bcolor=null,this.isDown=!1,this.isDraw=!1,this.setColor(this.value),this.init(),void 0!==t.open&&this.open()}function n(t){i.call(this,t),this.round=Math.round,this.autoHeight=!0,this.baseH=this.h,this.hplus=50,this.res=t.res||40,this.l=1,this.pa1=[],this.pa2=[],this.pa3=[];for(var s=this.res+1;s--;)this.pa1.push(50),this.pa2.push(50),this.pa3.push(50);var e=Math.floor(.5*this.h)-6;this.c[1].textContent="FPS",this.c[0].style.cursor="pointer",this.c[0].style.pointerEvents="auto";var h="display:none; left:10px; top:"+this.h+"px; height:"+(this.hplus-8)+"px; background: rgba(0, 0, 0, 0.2);border:1px solid rgba(255, 255, 255, 0.2); ";this.c[2]=v.dom("path",v.css.basic+h,{fill:"rgba(200,200,200,0.3)","stroke-width":1,stroke:this.fontColor,"vector-effect":"non-scaling-stroke"}),this.c[2].setAttribute("viewBox","0 0 "+this.res+" 42"),this.c[2].setAttribute("height","100%"),this.c[2].setAttribute("width","100%"),this.c[2].setAttribute("preserveAspectRatio","none"),v.dom("path",null,{fill:"rgba(255,255,0,0.3)","stroke-width":1,stroke:"#FF0","vector-effect":"non-scaling-stroke"},this.c[2]),v.dom("path",null,{fill:"rgba(0,255,255,0.3)","stroke-width":1,stroke:"#0FF","vector-effect":"non-scaling-stroke"},this.c[2]),this.c[3]=v.dom("div",v.css.basic+"width:100%; bottom:0px; height:1px; background: rgba(255, 255, 255, 0.2);"),this.c[4]=v.dom("path",v.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+e+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"}),this.isShow=t.show||!1,this.c[1].style.marginLeft="10px",this.now=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,this.startTime=this.now(),this.prevTime=this.startTime,this.frames=0,this.isMem=!1,this.ms=0,this.fps=0,this.mem=0,this.mm=0,self.performance&&self.performance.memory&&(this.isMem=!0),this.init()}function r(t){i.call(this,t),this.autoHeight=!0,this.isGroup=!0,this.current=-1,this.target=null,this.decal=0,this.baseH=this.h;var s=Math.floor(.5*this.h)-6;this.isLine=void 0!==t.line&&t.line,this.c[2]=v.dom("div",v.css.basic+"width:100%; left:0; height:auto; overflow:hidden; top:"+this.h+"px"),this.c[3]=v.dom("path",v.css.basic+"position:absolute; width:10px; height:10px; left:0; top:"+s+"px;",{d:v.GPATH,fill:this.fontColor,stroke:"none"}),this.c[4]=v.dom("path",v.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+s+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"}),this.isLine&&(this.c[5]=v.dom("div",v.css.basic+"background:rgba(255, 255, 255, 0.2); width:100%; left:0; height:1px; bottom:0px"));var e=this.s;e[0].height=this.h+"px",e[1].height=this.h+"px",this.c[1].name="group",this.s[1].marginLeft="10px",this.s[1].lineHeight=this.h-4,this.s[1].color=this.fontColor,this.s[1].fontWeight="bold",this.uis=[],this.c[1].events=["click"],this.init(),void 0!==t.bg&&this.setBG(t.bg),void 0!==t.open&&this.open()}function l(t){i.call(this,t),this.autoWidth=!1,this.value=[0,0],this.joyType="analogique",this.precision=t.precision||2,this.multiplicator=t.multiplicator||1,this.x=0,this.y=0,this.oldx=0,this.oldy=0,this.interval=null,this.radius=Math.floor(.5*(this.w-20)),this.innerRadius=t.innerRadius||.6*this.radius,this.maxDistance=this.radius-this.innerRadius-5,this.height=2*this.radius,this.h=t.height||this.height+40,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=20),this.c[2]=v.dom("circle",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;",{cx:this.radius,cy:this.radius,r:this.radius,fill:"url(#grad)"}),this.c[3]=v.dom("circle",v.css.basic+"left:0px; top:"+(this.top-10)+"px; width:"+(this.w+20)+"px; height:"+(this.height+20)+"px;",{cx:this.radius+10,cy:this.radius+10,r:this.innerRadius+10,fill:"url(#gradS)"}),this.c[4]=v.dom("circle",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.w+"px; height:"+this.height+"px;",{cx:this.radius,cy:this.radius,r:this.innerRadius,fill:"url(#gradIn)","stroke-width":1,stroke:"#000"}),this.c[5]=v.dom("div",v.css.txt+"text-align:center; top:"+(this.height+20)+"px; width:"+this.w+"px; color:"+this.fontColor);var s=this.c[2];v.dom("defs",null,{},s),v.dom("radialGradient",null,{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},s,1),v.dom("stop",null,{offset:"40%",style:"stop-color:rgb(0,0,0); stop-opacity:0.3;"},s,[1,0]),v.dom("stop",null,{offset:"80%",style:"stop-color:rgb(0,0,0); stop-opacity:0;"},s,[1,0]),v.dom("stop",null,{offset:"90%",style:"stop-color:rgb(50,50,50); stop-opacity:0.4;"},s,[1,0]),v.dom("stop",null,{offset:"100%",style:"stop-color:rgb(50,50,50); stop-opacity:0;"},s,[1,0]),s=this.c[3],v.dom("defs",null,{},s),v.dom("radialGradient",null,{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},s,1),v.dom("stop",null,{offset:"60%",style:"stop-color:rgb(0,0,0); stop-opacity:0.5;"},s,[1,0]),v.dom("stop",null,{offset:"100%",style:"stop-color:rgb(0,0,0); stop-opacity:0;"},s,[1,0]);var e=["rgb(40,40,40)","rgb(48,48,48)","rgb(30,30,30)"],h=["rgb(1,90,197)","rgb(3,95,207)","rgb(0,65,167)"];s=this.c[4],v.dom("defs",null,{},s),v.dom("radialGradient",null,{id:"gradIn",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},s,1),v.dom("stop",null,{offset:"30%",style:"stop-color:"+e[0]+"; stop-opacity:1;"},s,[1,0]),v.dom("stop",null,{offset:"60%",style:"stop-color:"+e[1]+"; stop-opacity:1;"},s,[1,0]),v.dom("stop",null,{offset:"80%",style:"stop-color:"+e[1]+"; stop-opacity:1;"},s,[1,0]),v.dom("stop",null,{offset:"100%",style:"stop-color:"+e[2]+"; stop-opacity:1;"},s,[1,0]),v.dom("radialGradient",null,{id:"gradIn2",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},this.c[4],1),v.dom("stop",null,{offset:"30%",style:"stop-color:"+h[0]+"; stop-opacity:1;"},s,[1,1]),v.dom("stop",null,{offset:"60%",style:"stop-color:"+h[1]+"; stop-opacity:1;"},s,[1,1]),v.dom("stop",null,{offset:"80%",style:"stop-color:"+h[1]+"; stop-opacity:1;"},s,[1,1]),v.dom("stop",null,{offset:"100%",style:"stop-color:"+h[2]+"; stop-opacity:1;"},s,[1,1]),this.c[5].textContent="x"+this.value[0]+" y"+this.value[1],this.init(),this.update(!1)}function c(t){i.call(this,t),this.autoWidth=!1,this.buttonColor=v.colors.button,this.setTypeNumber(t),this.mPI=.8*Math.PI,this.toDeg=180/Math.PI,this.cirRange=2*this.mPI,this.radius=Math.floor(.5*(this.w-20)),this.ww=this.height=2*this.radius,this.h=t.height||this.height+40,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=20),this.percent=0,this.c[2]=v.dom("div",v.css.txtnumber+"text-align:center; top:"+(this.height+24)+"px; width:"+this.w+"px; color:"+this.fontColor),this.c[3]=v.dom("circle",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.ww+"px; height:"+this.height+"px; ",{cx:this.radius,cy:this.radius,r:this.radius-4,fill:"rgba(0,0,0,0.3)"}),this.c[4]=v.dom("circle",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.ww+"px; height:"+this.height+"px;",{cx:this.radius,cy:.5*this.radius,r:3,fill:this.fontColor}),this.c[5]=v.dom("path",v.css.basic+"left:10px; top:"+this.top+"px; width:"+this.ww+"px; height:"+this.height+"px;",{d:this.makeGrad(),"stroke-width":1,stroke:v.colors.stroke}),v.dom("circle",null,{cx:this.radius,cy:this.radius,r:.7*this.radius,fill:this.buttonColor,"stroke-width":1,stroke:v.colors.stroke},this.c[3]),this.r=0,this.init(),this.update()}function a(t){i.call(this,t),this.autoHeight=!1;var s=t.align||"center";this.sMode=0,this.tMode=0,this.buttonColor=t.bColor||v.colors.button;var e=Math.floor(.5*this.h)-5;this.c[2]=v.dom("div",v.css.basic+"top:0; height:90px;  display:none; overflow:hidden;"),this.c[3]=v.dom("div",v.css.txt+"text-align:"+s+"; line-height:"+(this.h-4)+"px; top:1px;  background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px;"),this.c[4]=v.dom("path",v.css.basic+"position:absolute; width:10px; height:10px; top:"+e+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"}),this.scroller=v.dom("div",v.css.basic+"right:5px;  width:10px; background:#666; display:none;"),this.c[3].style.color=this.fontColor,this.list=t.list||[],this.items=[],this.baseH=this.h,this.itemHeight=t.itemHeight||this.h-3,this.full=t.full||!1,this.py=0,this.ww=this.sb,this.scroll=!1,this.isDown=!1,this.currentItem=null,this.side=t.side||"down",this.holdTop=0,"up"===this.side?(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[2].style.bottom=this.h-2+"px",this.c[3].style.bottom="1px",this.c[4].style.bottom=e+"px"):this.c[2].style.top=this.baseH+"px",this.listIn=v.dom("div",v.css.basic+"left:0; top:0; width:100%; background:rgba(0,0,0,0.2);"),this.listIn.name="list",this.topList=0,this.c[2].appendChild(this.listIn),this.c[2].appendChild(this.scroller),this.setList(this.list,t.value),this.init(),void 0!==t.open&&this.open()}function u(t){i.call(this,t),this.type="number",this.setTypeNumber(t),this.allway=t.allway||!1,this.isDrag=void 0===t.drag||t.drag,this.value=[0],this.toRad=1,this.isNumber=!0,this.isAngle=!1,this.isVector=!1,this.isSelect=!1,void 0!==t.value&&(isNaN(t.value)?t.value instanceof Array?(this.value=t.value,this.isNumber=!1):t.value instanceof Object&&(this.value=[],t.value.x&&(this.value[0]=t.value.x),t.value.y&&(this.value[1]=t.value.y),t.value.z&&(this.value[2]=t.value.z),t.value.w&&(this.value[3]=t.value.w),this.isVector=!0):this.value=[t.value]),this.lng=this.value.length,this.tmp=[],t.isAngle&&(this.isAngle=!0,this.toRad=Math.PI/180),this.current=void 0,this.selected=null;for(var s=this.lng;s--;)this.isAngle&&(this.value[s]=(180*this.value[s]/Math.PI).toFixed(this.precision)),this.c[2+s]=v.dom("div",v.css.txtselect+"letter-spacing:-1px; height:"+(this.h-4)+"px; line-height:"+(this.h-8)+"px;"),this.isDrag&&(this.c[2+s].style.cursor="move"),t.center&&(this.c[2+s].style.textAlign="center"),this.c[2+s].textContent=this.value[s],this.c[2+s].style.color=this.fontColor;this.init()}function p(t){if(i.call(this,t),this.setTypeNumber(t),this.stype=t.stype||0,this.buttonColor=t.bColor||v.colors.button,this.isDown=!1,this.isOver=!1,this.allway=t.allway||!1,this.firstImput=!1,this.c[2]=v.dom("div",v.css.txtselect+"letter-spacing:-1px; padding:2px 5px; text-align:right;  width:47px; border:1px solid "+v.colors.hide+"; color:"+this.fontColor),this.c[3]=v.dom("div",v.css.basic+" top:0; height:"+this.h+"px;"),this.c[4]=v.dom("div",v.css.basic+"background:rgba(0,0,0,0.3); top:2px; height:"+(this.h-4)+"px;"),this.c[5]=v.dom("div",v.css.basic+"left:4px; top:5px; height:"+(this.h-10)+"px; background:"+this.fontColor+";"),this.c[2].isNum=!0,0!==this.stype){if(1===this.stype||3===this.stype)var s=4,e=8,h=this.h-4,o=20;2===this.stype&&(s=2,e=4,o=2,h=.5*(this.h-4)),3===this.stype&&(this.c[5].style.visible="none"),this.c[4].style.borderRadius=s+"px",this.c[4].style.height=e+"px",this.c[4].style.top=.5*this.h-s+"px",this.c[5].style.borderRadius=.5*s+"px",this.c[5].style.height=s+"px",this.c[5].style.top=.5*this.h-.5*s+"px",this.c[6]=v.dom("div",v.css.basic+"border-radius:"+o+"px; margin-left:"+.5*-h+"px; border:1px solid "+v.colors.border+"; background:"+this.buttonColor+"; left:4px; top:2px; height:"+(this.h-4)+"px; width:"+h+"px;")}this.init()}function d(t){i.call(this,t),this.value=t.value||"",this.allway=t.allway||!1,this.firstImput=!1,this.c[2]=v.dom("div",v.css.txtselect),this.c[2].name="input",this.c[2].textContent=this.value,this.init()}function f(t){i.call(this,t);var s=t.prefix||"";this.c[2]=v.dom("div",v.css.txt+"text-align:right; width:60px; line-height:"+(this.h-8)+"px; color:"+this.fontColor),31===this.h&&(this.s[0].height=this.h+"px",this.s[1].top="8px",this.c[2].style.top="8px"),this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," "),this.c[2].textContent=s,this.init()}function m(){v.isEventsInit||v.initEvents();var t,i,m=arguments,g=!1,x=null;switch("string"==typeof m[0]?(t=m[0],i=m[1]||{}):"object"==typeof m[0]&&(g=!0,void 0===m[2]&&[].push.call(m,{}),t=m[2].type?m[2].type:"slide",i=m[2],i.name=m[1],i.value=m[0][m[1]]),t.toLowerCase()){case"bool":x=new s(i);break;case"button":x=new e(i);break;case"circular":x=new h(i);break;case"color":x=new o(i);break;case"fps":x=new n(i);break;case"group":x=new r(i);break;case"joystick":x=new l(i);break;case"knob":x=new c(i);break;case"list":x=new a(i);break;case"numeric":case"number":x=new u(i);break;case"slide":x=new p(i);break;case"textInput":case"string":x=new d(i);break;case"title":x=new f(i)}if(null!==x)return x.isUI||(v.ui.push(x),x.getZone()),g&&x.setReferency(m[0],m[1]),x}function g(t){t=t||{},this.isReset=!0,this.is3d=t.is3d||!1,this.css=void 0!==t.css?t.css:"",this.callback=void 0===t.callback?null:t.callback,this.mHeight=t.maxHeight||void 0,this.zone={x:0,y:0,w:0,h:0},this.local={x:-1,y:-1},this.mouse=null,this.size=v.size,void 0!==t.p&&(this.size.p=t.p),void 0!==t.w&&(this.size.w=t.w),void 0!==t.h&&(this.size.h=t.h),void 0!==t.s&&(this.size.s=t.s),this.size.h=this.size.h<11?11:this.size.h,this.zone.w=this.size.w,this.bh=this.size.h,this.h=0,this.prevY=-1,this.sw=0,this.colors=v.colors,this.bg=t.bg||v.colors.background,this.isWithClose=!0,void 0!==t.close&&(this.isWithClose=t.close,this.bh=this.isWithClose?this.bh:0),this.isCenter=t.center||!1,this.lockwheel=!1,this.onWheel=!1,this.isOpen=!0,this.uis=[],this.current=-1,this.target=null,this.decal=0,this.ratio=1,this.content=v.dom("div",v.css.basic+"display:block; width:0px; height:auto; top:0; right:10px; pointer-events:auto;"+this.css),void 0!==t.parent?t.parent&&t.parent.appendChild(this.content):document.body.appendChild(this.content),this.innerContent=v.dom("div",v.css.basic+"width:100%; top:0; left:0; height:auto; overflow:hidden;"),this.content.appendChild(this.innerContent),this.inner=v.dom("div",v.css.basic+"width:100%; top:0; left:0; height:auto;"),this.innerContent.appendChild(this.inner),this.scrollBG=v.dom("div",v.css.basic+"right:0; top:0; width:"+this.size.s+"px; height:10px;  display:none; background:"+this.bg+"; border-left:1px solid "+this.colors.stroke+";"),this.content.appendChild(this.scrollBG),this.scroll=v.dom("div",v.css.basic+"background:"+this.colors.scroll+"; right:0px; top:0; width:"+this.size.s+"px; height:10px;"),this.scrollBG.appendChild(this.scroll),this.bottom=v.dom("div",v.css.txt+"width:100%; top:auto; bottom:0; left:0; border-bottom-right-radius:10px;  border-bottom-left-radius:10px; text-align:center;  height:"+this.bh+"px; line-height:"+(this.bh-5)+"px; border-top:1px solid "+v.colors.stroke+";"),this.content.appendChild(this.bottom),this.bottom.textContent="close",this.bottom.style.background=this.bg,this.isDown=!1,this.isScroll=!1;var i=this.content.getBoundingClientRect();this.top=i.top,this.left=i.left,this.callbackClose=function(){},this.autoResize=void 0===t.autoResize||t.autoResize,this.autoResize&&window.addEventListener("resize",function(){this.resize()}.bind(this),!1),this.setWidth(),this.getCorner(),v.main=this,v.ui.push(this)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var e=arguments[s];if(void 0!==e&&null!==e)for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(i[h]=e[h])}return i}}();var v={ui:[],main:null,e:{type:null,clientX:0,clientY:0,keyCode:NaN,key:null},ID:null,lock:!1,input:null,firstImput:!0,callbackImput:null,tmpTime:null,isEventsInit:!1,eventCallback:function(){},doc:document,frag:document.createDocumentFragment(),hidefrag:document.createDocumentFragment(),xmlserializer:new XMLSerializer,colorRing:null,current:-1,URL:window.URL||window.webkitURL,isLoop:!1,listens:[],tmpCursor:"auto",svgns:"http://www.w3.org/2000/svg",htmls:"http://www.w3.org/1999/xhtml",DOM_SIZE:["height","width","top","left","bottom","right","margin-left","margin-right","margin-top","margin-bottom"],SVG_TYPE_D:["pattern","defs","transform","stop","animate","radialGradient","linearGradient","animateMotion"],SVG_TYPE_G:["svg","rect","circle","path","polygon","text","g","line","foreignObject"],TwoPI:6.283185307179586,size:{w:240,h:20,p:30,s:20},initEvents:function(){v.isEventsInit||(v.doc.addEventListener("click",v,!1),v.doc.addEventListener("mousedown",v,!1),v.doc.addEventListener("mousemove",v,!1),v.doc.addEventListener("mouseup",v,!1),v.doc.addEventListener("mousewheel",v,!1),v.doc.addEventListener("keydown",v,!1),v.doc.addEventListener("keyup",v,!1),v.isEventsInit=!0)},handleEvent:function(t){if(t.preventDefault(),"keydown"===t.type)v.editText(t);else{var i=v.e;i.clientX=t.clientX||0,i.clientY=t.clientY||0,i.type=t.type,"mousedown"===i.type&&(v.lock=!0),"mouseup"===i.type&&(v.lock=!1),"mousemove"!==i.type||v.lock||v.findID(i),null!==v.ID&&v.ID[i.type]&&(null!==v.ID.mouse&&(i.clientX=v.ID.mouse.x,i.clientY=v.ID.mouse.y),v.ID[i.type](i),v.eventCallback())}},overInput:function(){v.input.style.border="1px dashed "+v.colors.border},clearInput:function(){var t=v.input;null!==t&&(!v.firstImput&&v.callbackImput&&v.callbackImput(),v.callbackImput=null,t.style.border="1px dashed "+v.colors.hide,t.contentEditable=!1,t.blur(),t=null)},setInput:function(t,i){v.clearInput(),v.firstImput=!0,v.callbackImput=i,v.input=t,v.input.style.border="1px dashed "+v.colors.borderSelect,v.input.contentEditable=!0,v.input.focus(),v.select(v.input)},editText:function(t){var i=v.input;null!==i&&(13===t.keyCode&&(v.callbackImput(),v.clearInput()),i.isNum?(t.keyCode>95&&t.keyCode<106||110===t.keyCode||109===t.keyCode)&&(v.firstImput?(i.textContent=t.key,v.firstImput=!1):i.textContent+=t.key):v.firstImput?(i.textContent=t.key,v.firstImput=!1):i.textContent+=t.key)},findID:function(t){for(var i,s=v.ui.length,e=-1;s--;)if(i=v.ui[s],null!==i.mouse){if(v.over(i,i.mouse.x,i.mouse.y)){e=s,e!==v.current&&(v.clearOldID(),v.current=e,v.ID=i);break}}else if(v.over(i,t.clientX,t.clientY)){e=s,e!==v.current&&(v.clearOldID(),v.current=e,v.ID=i);break}-1===e&&v.clearOldID()},clearOldID:function(){v.ID&&(v.current=-1,v.ID.reset(),v.ID=null)},cursor:function(t){t||(t="auto"),t!==v.tmpCursor&&(v.doc.body.style.cursor=t,v.tmpCursor=t)},zone:function(t,i){i=i||0;var s=t.getBoundingClientRect();return{x:s.left,y:s.top-i,w:s.width,h:s.height}},over:function(t,i,s){if(void 0===i||void 0===s)return!1;var e=t.zone,h=t.local;return h.x=i-e.x,h.y=s-e.y,h.x>=0&&h.y>=0&&h.x<=e.w&&h.y<=e.h},select:function(){v.doc.execCommand("selectall",null,!1)},calcUis:function(t,i,s){var e,h,o=t.length,n=0;for(h=0;h<o;h++)e=t[h],e.zone.w=e.w,e.zone.h=e.h,e.autoWidth?(e.zone.x=i.x,e.zone.y=s,s+=e.h+1):(0===n&&(s+=e.h+1),e.zone.y=s-e.h,e.zone.x=i.x+n,(n+=e.w)+e.w>i.w&&(n=0)),e.isGroup&&e.calcUis()},colors:{text:"#C0C0C0",background:"rgba(44,44,44,0.3)",backgroundOver:"rgba(11,11,11,0.5)",border:"#454545",borderSelect:"#308AFF",button:"#404040",boolbg:"#181818",select:"#308AFF",moving:"#03afff",down:"#024699",stroke:"rgba(11,11,11,0.5)",scroll:"#333333",hide:"rgba(0,0,0,0)"},css:{basic:"-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; border:none; overflow:hidden; background:none;"},GPATH:"M 7 7 L 7 8 8 8 8 7 7 7 M 5 7 L 5 8 6 8 6 7 5 7 M 3 7 L 3 8 4 8 4 7 3 7 M 7 5 L 7 6 8 6 8 5 7 5 M 6 6 L 6 5 5 5 5 6 6 6 M 7 3 L 7 4 8 4 8 3 7 3 M 6 4 L 6 3 5 3 5 4 6 4 M 3 5 L 3 6 4 6 4 5 3 5 M 3 3 L 3 4 4 4 4 3 3 3 Z",setText:function(t,i,s){t=t||11,i=i||"#CCC",s=s||'"Consolas", "Lucida Console", Monaco, monospace',v.colors.text=i,v.css.txt=v.css.basic+"font-family:"+s+"; font-size:"+t+"px; color:"+i+"; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;",v.css.txtedit=v.css.txt+"padding:2px 5px; outline:none; -webkit-appearance:none; -moz-appearance:none; border:1px dashed #4f4f4f; -ms-user-select:element;",v.css.txtselect=v.css.txt+"padding:2px 5px; outline:none; -webkit-appearance:none; -moz-appearance:none; border:1px dashed "+v.colors.border+"; -ms-user-select:element;",v.css.txtnumber=v.css.txt+"letter-spacing:-1px; padding:2px 5px;",v.css.item=v.css.txt+"position:relative; background:rgba(0,0,0,0.2); margin-bottom:1px; "},clone:function(t){return t.cloneNode(!0)},setSvg:function(t,i,s,e){-1===e?t.setAttributeNS(null,i,s):t.childNodes[e||0].setAttributeNS(null,i,s)},set:function(t,i){for(var s in i)"txt"===s&&(t.textContent=i[s]),t.setAttributeNS(null,s,i[s])},get:function(t,i){if(void 0===i)return t;if(!isNaN(i))return t.childNodes[i];if(i instanceof Array){if(2===i.length)return t.childNodes[i[0]].childNodes[i[1]];if(3===i.length)return t.childNodes[i[0]].childNodes[i[1]].childNodes[i[2]]}},dom:function(t,i,s,e,h){return t=t||"div",-1!==v.SVG_TYPE_D.indexOf(t)||-1!==v.SVG_TYPE_G.indexOf(t)?"svg"===t?(e=v.doc.createElementNS(v.svgns,"svg"),v.set(e,s)):(void 0===e&&(e=v.doc.createElementNS(v.svgns,"svg")),v.addAttributes(e,t,s,h)):e=void 0===e?v.doc.createElementNS(v.htmls,t):e.appendChild(v.doc.createElementNS(v.htmls,t)),i&&(e.style.cssText=i),void 0===h?e:e.childNodes[h||0]},addAttributes:function(t,i,s,e){var h=v.doc.createElementNS(v.svgns,i);return v.set(h,s),v.get(t,e).appendChild(h),-1!==v.SVG_TYPE_G.indexOf(i)&&(h.style.pointerEvents="none"),h},clear:function(t){for(v.purge(t);t.firstChild;)t.firstChild.firstChild&&v.clear(t.firstChild),t.removeChild(t.firstChild)},purge:function(t){var i,s,e=t.attributes;if(e)for(i=e.length;i--;)s=e[i].name,"function"==typeof t[s]&&(t[s]=null);if(e=t.childNodes)for(i=e.length;i--;)v.purge(t.childNodes[i])},loop:function(){v.isLoop&&requestAnimationFrame(v.loop),v.update()},update:function(){for(var t=v.listens.length;t--;)v.listens[t].listening()},removeListen:function(t){var i=v.listens.indexOf(t);v.listens.splice(i,1),0===v.listens.length&&(v.isLoop=!1)},addListen:function(t){-1===v.listens.indexOf(t)&&(v.listens.push(t),v.isLoop||(v.isLoop=!0,v.loop()))},ColorLuma:function(t,i){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),i=i||0;var s,e,h="#";for(e=0;e<3;e++)s=parseInt(t.substr(2*e,2),16),s=Math.round(Math.min(Math.max(0,s+s*i),255)).toString(16),h+=("00"+s).substr(s.length);return h},findDeepInver:function(t){return.3*t[0]+.59*t[1]+.11*t[2]<=.6},hexToHtml:function(t){return t=void 0===t?0:t,"#"+("000000"+t.toString(16)).substr(-6)},htmlToHex:function(t){return t.toUpperCase().replace("#","0x")},u255:function(t,i){return parseInt(t.substring(i,i+2),16)/255},u16:function(t,i){return parseInt(t.substring(i,i+1),16)/15},unpack:function(t){return 7==t.length?[v.u255(t,1),v.u255(t,3),v.u255(t,5)]:4==t.length?[v.u16(t,1),v.u16(t,2),v.u16(t,3)]:void 0},htmlRgb:function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},rgbToHex:function(t){return"#"+("000000"+(255*t[0]<<16^255*t[1]<<8^255*t[2]<<0).toString(16)).slice(-6)},hueToRgb:function(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+6*(i-t)*(2/3-s):t},rgbToHsl:function(t){var i=t[0],s=t[1],e=t[2],h=Math.min(i,s,e),o=Math.max(i,s,e),n=o-h,r=0,l=0,c=(h+o)/2;return c>0&&c<1&&(l=n/(c<.5?2*c:2-2*c)),n>0&&(o==i&&o!=s&&(r+=(s-e)/n),o==s&&o!=e&&(r+=2+(e-i)/n),o==e&&o!=i&&(r+=4+(i-s)/n),r/=6),[r,l,c]},hslToRgb:function(t){var i,s,e=t[0],h=t[1],o=t[2];return 0===h?[o,o,o]:(s=o<=.5?o*(h+1):o+h-o*h,i=2*o-s,[v.hueToRgb(i,s,e+.33333),v.hueToRgb(i,s,e),v.hueToRgb(i,s,e-.33333)])},makeColorRing:function(t,i){var s=t||256,e=v.dom("svg",v.css.basic,{viewBox:"0 0 "+s+" "+s,width:s,height:s,preserveAspectRatio:"none"});v.dom("defs",null,{},e),v.dom("g",null,{},e);var h,o,n,r,l,c,a,u,p=i||40,d=.5*(s-p),f=.5*s,m=8/d/24*Math.PI,g=0,x=[];for(c=0;c<=24;++c){if(n=c/24,r=n*Math.PI*2,h=.5*(g+r),o=1/Math.cos(.5*(r-g)),l=[Math.sin(g),-Math.cos(g),Math.sin(h)*o,-Math.cos(h)*o,Math.sin(r),-Math.cos(r)],x[1]=v.rgbToHex(v.hslToRgb([n,1,.5])),c>0){for(a=6;a--;)l[a]=(l[a]*d+f).toFixed(2);u=" M"+l[0]+" "+l[1]+" Q"+l[2]+" "+l[3]+" "+l[4]+" "+l[5],v.dom("linearGradient","",{id:"G"+c,x1:l[0],y1:l[1],x2:l[4],y2:l[5],gradientUnits:"userSpaceOnUse"},e,0),v.dom("stop","",{offset:"0%","stop-color":x[0]},e,[0,c-1]),v.dom("stop","",{offset:"100%","stop-color":x[1]},e,[0,c-1]),v.dom("path","",{d:u,"stroke-width":p,stroke:"url(#G"+c+")","stroke-linecap":"butt"},e,1)}g=r-m,x[0]=x[1],n}var b=128-p+2;v.dom("linearGradient","",{id:"GL1",x1:f-60,y1:f-60,x2:f-60,y2:f+60,gradientUnits:"userSpaceOnUse"},e,0),v.dom("stop","",{offset:"0%","stop-color":"#FFFFFF"},e,[0,24]),v.dom("stop","",{offset:"50%","stop-color":"#FFFFFF","stop-opacity":0},e,[0,24]),v.dom("stop","",{offset:"50%","stop-color":"#000000","stop-opacity":0},e,[0,24]),v.dom("stop","",{offset:"100%","stop-color":"#000000"},e,[0,24]),v.dom("linearGradient","",{id:"GL2",x1:f-60,y1:f-60,x2:f+60,y2:f-60,gradientUnits:"userSpaceOnUse"},e,0),v.dom("stop","",{offset:"0%","stop-color":"#7f7f7f","stop-opacity":0},e,[0,25]),v.dom("stop","",{offset:"50%","stop-color":"#7f7f7f","stop-opacity":.5},e,[0,25]),v.dom("stop","",{offset:"100%","stop-color":"#7f7f7f"},e,[0,25]),v.dom("circle","",{cx:128,cy:128,r:b,fill:"red"},e),v.dom("circle","",{cx:128,cy:128,r:b,fill:"url(#GL2)"},e),v.dom("circle","",{cx:128,cy:128,r:b,fill:"url(#GL1)"},e),v.dom("circle","",{cx:0,cy:0,r:6,"stroke-width":3,stroke:"#FFF",fill:"none"},e),v.dom("circle","",{cx:0,cy:0,r:6,"stroke-width":3,stroke:"#000",fill:"none"},e),v.colorRing=e,console.log(e)},toCanvas:function(t,i,s,e,h,o){if(o&&(clearTimeout(v.tmpTime),v.tmpTime=null),null===v.tmpTime){v.tmpTime=setTimeout(function(){v.tmpTime=null},10);var n=t.getContext("2d"),r=!1,l=!1;if(void 0!==e&&void 0!==h||(r=!0),r){var c=i.getBoundingClientRect();e=c.width,h=c.height,e===t.width&&h===t.height||(l=!0)}var a=new Image,u=v.xmlserializer.serializeToString(i),p='<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+h+'"><foreignObject style="pointer-events: none; left:0;" width="100%" height="100%">'+u+"</foreignObject></svg>";a.onload=function(){l?(t.width=e,t.height=h):n.clearRect(0,0,e,h),n.drawImage(a,0,0),void 0!==s&&s()},a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(p),a.crossOrigin=""}}};v.setText(),i.prototype={constructor:i,
reset:function(){},init:function(){var t=this.s,i=this.c;t[0].height=this.h+"px",this.isUI&&(t[0].background=this.bg),void 0!==i[1]&&this.autoWidth&&(t[1]=i[1].style,t[1].height=this.h-4+"px",t[1].lineHeight=this.h-8+"px");for(var s=v.frag,e=1,h=i.length;e!==h;e++)void 0!==i[e]&&(s.appendChild(i[e]),t[e]=i[e].style);null!==this.target?this.target.appendChild(i[0]):this.isUI?this.main.inner.appendChild(i[0]):document.body.appendChild(i[0]),i[0].appendChild(s),this.rSize(),this.isUI||(this.c[0].style.pointerEvents="auto",this.addEvent())},getZone:function(t){this.zone=v.zone(this.c[0],t),this.isGroup&&this.calcUis()},uiout:function(){this.s[0].background=this.bg},uiover:function(){this.s[0].background=this.bgOver},rename:function(t){this.c[1].textContent=t},listen:function(){return v.addListen(this),v.listens.push(this),this},listening:function(){null!==this.parent&&(this.isSend||this.isEdit||this.setValue(this.parent[this.val]))},setValue:function(t){this.isNumber?this.value=this.numValue(t):this.value=t,this.update()},update:function(){},onChange:function(t){return this.callback=t,this},onFinishChange:function(t){return this.callback=null,this.endCallback=t,this},send:function(t){this.isSend=!0,null!==this.parent&&(this.parent[this.val]=t||this.value),this.callback&&this.callback(t||this.value),this.isSend=!1},sendEnd:function(t){this.endCallback&&this.endCallback(t||this.value),null!==this.parent&&(this.parent[this.val]=t||this.value)},clear:function(){this.clearEvent(),v.clear(this.c[0]),null!==this.target?this.target.removeChild(this.c[0]):this.isUI?this.main.clearOne(this):document.body.removeChild(this.c[0]),this.c=null,this.s=null,this.callback=null,this.target=null},setSize:function(t){if(this.autoWidth)if(this.w=t,this.simple)this.sb=this.w-this.sa;else{var i=this.w*(this.p/100);this.sa=10+~~i,this.sb=~~this.w-i-20}},rSize:function(){this.autoWidth&&(this.s[0].width=this.w+"px",this.simple||(this.s[1].width=this.sa+"px"))},setTypeNumber:function(t){this.isNumber=!0,this.value=0,void 0!==t.value&&("string"==typeof t.value?this.value=1*t.value:this.value=t.value),this.min=void 0===t.min?-1/0:t.min,this.max=void 0===t.max?1/0:t.max,this.precision=void 0===t.precision?2:t.precision;var i;switch(this.precision){case 0:i=1;break;case 1:i=.1;break;case 2:i=.01;break;case 3:i=.001;break;case 4:i=1e-4}this.step=void 0===t.step?i:t.step,this.range=this.max-this.min,this.value=this.numValue(this.value)},numValue:function(t){return 1*Math.min(this.max,Math.max(this.min,t)).toFixed(this.precision)},addEvent:function(){for(var t,i,s=this.c.length;s--;)if(void 0!==(i=this.c[s])&&void 0!==i.events)for(t=i.events.length;t--;)i.addEventListener(i.events[t],this,!1)},clearEvent:function(){for(var t,i,s=this.c.length;s--;)if(void 0!==(i=this.c[s])&&void 0!==i.events)for(t=i.events.length;t--;)i.removeEventListener(i.events[t],this,!1)},mousewheel:function(t){},mousedown:function(t){},mousemove:function(t){},mouseup:function(t){},keydown:function(t){},keyup:function(t){},click:function(t){},setReferency:function(t,i){this.parent=t,this.val=i},display:function(t){this.s[0].display=t?"block":"none"},open:function(){this.isOpen||(this.isOpen=!0)},close:function(){this.isOpen&&(this.isOpen=!1)}},s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,mousemove:function(t){v.cursor("pointer")},click:function(t){this.value=!this.value,this.update(),this.send()},update:function(){var t=this.s;this.value?(t[4].marginLeft="18px",t[2].background=this.fontColor,t[2].borderColor=this.fontColor,t[4].borderColor=this.fontColor):(t[4].marginLeft="0px",t[2].background=v.colors.boolbg,t[2].borderColor=v.colors.boolbg,t[4].borderColor=v.colors.border)},rSize:function(){i.prototype.rSize.call(this);var t=this.s;t[2].left=this.sa+"px",t[3].left=this.sa+1+"px",t[4].left=this.sa+1+"px"}}),e.prototype=Object.assign(Object.create(i.prototype),{constructor:e,testZone:function(t){if(!v.over(this,t.clientX,t.clientY))return"";for(var i=this.lng,s=this.tmp,e=this.local;i--;)if(e.x>s[i][0]&&e.x<s[i][2])return i+2},click:function(t){var i=this.testZone(t);i&&this.send(this.value[i-2])},mouseup:function(t){this.testZone(t)&&(this.isDown=!1,this.mousemove(t))},mousedown:function(t){this.testZone(t)&&(this.isDown=!0,this.mousemove(t))},mousemove:function(t){var i=this.testZone(t);this.reset(),i&&(this.selected=i,this.s[i].color="#FFF",this.s[i].background=this.isDown?v.colors.down:v.colors.select,v.cursor("pointer"))},reset:function(){this.selected&&(this.s[this.selected].color=this.fontColor,this.s[this.selected].background=this.buttonColor,this.selected=null,v.cursor())},dragover:function(){this.s[4].borderColor=v.colors.select,this.s[4].color=v.colors.select},dragend:function(){this.s[4].borderColor=this.fontColor,this.s[4].color=this.fontColor},drop:function(t){this.dragend(),this.fileSelect(t.dataTransfer.files[0])},initDrager:function(){this.c[4]=v.dom("div",v.css.txt+" text-align:center; line-height:"+(this.h-8)+"px; border:1px dashed "+this.fontColor+"; top:2px;  height:"+(this.h-4)+"px; border-radius:"+this.r+"px;"),this.c[4].textContent="DRAG",this.c[2].events=[],this.c[4].events=["dragover","dragend","dragleave","drop"]},initLoader:function(){this.c[3]=v.dom("input",v.css.basic+"border:1px solid "+v.colors.border+"; top:1px; opacity:0;  height:"+(this.h-2)+"px;"),this.c[3].name="loader",this.c[3].type="file",this.c[2].events=[],this.c[3].events=["change","mouseover","mousedown","mouseup","mouseout"]},fileSelect:function(t){var i=["png","jpg","mp4","webm","ogg"],s=["sea","bvh","BVH","z"];if(void 0!==t){var e=new FileReader,h=t.name,o=h.substring(h.lastIndexOf(".")+1,h.length);-1!==i.indexOf(o)?e.readAsDataURL(t):-1!==s.indexOf(o)?e.readAsArrayBuffer(t):e.readAsText(t),e.onload=function(t){this.callback&&this.callback(t.target.result,h,o)}.bind(this)}},label:function(t,i){i=i||2,this.c[i].textContent=t},icon:function(t,i,s){s=s||2,this.s[s].padding=(i||0)+"px 0px",this.c[s].innerHTML=t},rSize:function(){i.prototype.rSize.call(this);for(var t=this.s,s=this.sb,e=this.sa,h=this.lng,o=Math.floor((s-3*(h-1))/h);h--;)this.tmp[h]=[Math.floor(e+o*h+3*h),o],this.tmp[h][2]=this.tmp[h][0]+this.tmp[h][1],t[h+2].left=this.tmp[h][0]+"px",t[h+2].width=this.tmp[h][1]+"px";this.isDragButton&&(t[4].left=e+o+3+"px",t[4].width=o+"px"),this.isLoadButton&&(t[3].left=e+"px",t[3].width=o+"px")}}),h.prototype=Object.assign(Object.create(i.prototype),{constructor:h,mode:function(t){switch(t){case 0:this.s[2].color=this.fontColor,v.setSvg(this.c[3],"fill","rgba(0,0,0,0.2)"),v.setSvg(this.c[4],"fill",this.fontColor);break;case 1:this.s[2].color=this.colorPlus,v.setSvg(this.c[3],"fill","rgba(0,0,0,0.6)"),v.setSvg(this.c[4],"fill",this.colorPlus)}},reset:function(){this.mode(0)},mouseup:function(t){this.isDown=!1,this.sendEnd()},mousedown:function(t){this.isDown=!0,this.old=this.value,this.oldr=null,this.mousemove(t)},mousemove:function(t){if(this.mode(1),this.isDown){var i=this.radius-(t.clientX-this.zone.x-10),s=this.radius-(t.clientY-this.zone.y-this.top);if(this.r=Math.atan2(s,i)-.5*Math.PI,this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi,null!==this.oldr){var e=this.r-this.oldr;this.r=Math.abs(e)>Math.PI?this.oldr:this.r,e>6&&(this.r=0),e<-6&&(this.r=this.twoPi)}var h=1/this.twoPi,o=this.r*h,n=this.range*o+this.min-this.old;(n>=this.step||n<=this.step)&&(n=~~(n/this.step),this.value=this.numValue(this.old+n*this.step),this.update(!0),this.old=this.value,this.oldr=this.r)}},makePath:function(){var t=this.radius,i=this.percent*this.twoPi-.001,s=t+t*Math.sin(i),e=t-t*Math.cos(i);return"M "+t+","+t+" L "+t+",0 A "+t+","+t+" 0 "+(i>Math.PI?1:0)+" 1 "+s+","+e+" Z"},update:function(t){this.c[2].textContent=this.value,this.percent=(this.value-this.min)/this.range,v.setSvg(this.c[4],"d",this.makePath()),t&&this.send()}}),o.prototype=Object.assign(Object.create(i.prototype),{constructor:o,testZone:function(t,i){return v.over(this,t,i)?this.local.y<this.baseH+2?"title":"color":""},click:function(t){"title"===this.testZone(t.clientX,t.clientY)&&(this.isOpen?this.close():this.open())},mouseup:function(t){this.isDown=!1},mousedown:function(t){"color"===this.testZone(t.clientX,t.clientY)&&(this.isDown=!0,this.mousemove(t))},mousemove:function(t){var i=this.testZone(t.clientX,t.clientY);if("title"===i&&v.cursor("pointer"),"color"===i&&(v.cursor("crosshair"),this.isDown)){this.offset[0]=this.zone.x+this.sa+this.mid,this.offset[1]=this.zone.y+this.decal+this.mid;var s={x:t.clientX-this.offset[0],y:t.clientY-this.offset[1]},e=Math.sqrt(s.x*s.x+s.y*s.y)*this.ratio;if(e<128)if(e>88){var h=Math.atan2(s.x,-s.y)/6.28;this.setHSL([(h+1)%1,this.hsl[1],this.hsl[2]])}else{var o=Math.max(0,Math.min(1,-s.x/this.square*.5+.5)),n=Math.max(0,Math.min(1,-s.y/this.square*.5+.5));this.setHSL([this.hsl[0],o,n])}}},changeHeight:function(){this.h=this.isOpen?this.openHeight+this.baseH:this.baseH,this.oldH!==this.h&&(this.s[0].height=this.h+"px",null!==this.parentGroup?this.parentGroup.calc(this.h-this.oldH):this.isUI&&this.main.calc(this.h-this.oldH),this.oldH=this.h)},open:function(){this.isOpen||(this.isOpen=!0,this.s[3].visibility="visible",this.changeHeight())},close:function(){this.isOpen&&(this.isOpen=!1,this.s[3].visibility="hidden",this.changeHeight())},update:function(t){var i=v.rgbToHex(v.hslToRgb([this.hsl[0],1,.5]));this.drawMarkers(),this.value=this.bcolor,v.setSvg(this.c[3],"fill",i,2),this.s[2].background=this.bcolor,this.c[2].textContent=v.htmlToHex(this.bcolor),this.invert=v.findDeepInver(this.rgb),this.s[2].color=this.invert?"#fff":"#000",t&&("array"===this.ctype&&this.send(this.rgb),"rgb"===this.ctype&&this.send(v.htmlRgb(this.rgb)),"hex"===this.ctype&&this.send(v.htmlToHex(this.value)),"html"===this.ctype&&this.send())},setColor:function(t){var i=v.unpack(t);return this.bcolor!=t&&i&&(this.bcolor=t,this.rgb=i,this.hsl=v.rgbToHsl(this.rgb),this.update()),this},setHSL:function(t){return this.hsl=t,this.rgb=v.hslToRgb(t),this.bcolor=v.rgbToHex(this.rgb),this.update(!0),this},drawMarkers:function(){var t=this.invert?"#fff":"#000",i=6.28*this.hsl[0],s=[108*Math.sin(i),108*-Math.cos(i),120*(.5-this.hsl[1]),120*(.5-this.hsl[2])];v.setSvg(this.c[3],"cx",s[2]+128,5),v.setSvg(this.c[3],"cy",s[3]+128,5),v.setSvg(this.c[3],"stroke",t,5),v.setSvg(this.c[3],"cx",s[0]+128,6),v.setSvg(this.c[3],"cy",s[1]+128,6)},rSize:function(){i.prototype.rSize.call(this),this.ww=this.sb,this.openHeight=this.ww+10,"up"===this.side&&(this.decal=5),this.mid=Math.floor(.5*this.ww);var t=this.s;t[2].width=this.sb+"px",t[2].left=this.sa+"px",v.setSvg(this.c[3],"viewBox","0 0 "+this.ww+" "+this.ww),t[3].width=this.ww+"px",t[3].height=this.ww+"px",t[3].left=this.sa+"px",t[3].top=this.decal+"px",this.ratio=256/this.ww,this.square=this.ww/256*60,this.changeHeight()}}),n.prototype=Object.assign(Object.create(i.prototype),{constructor:n,click:function(t){this.isShow?this.hide():this.show()},mode:function(t){var i=this.s;switch(t){case 0:i[1].color=this.fontColor;break;case 1:i[1].color="#FFF";break;case 2:i[1].color=this.fontColor}},makePath:function(t){var i="";i+="M -1 50";for(var s=0;s<this.res+1;s++)i+=" L "+s+" "+t[s];return i+=" L "+(this.res+1)+" 50"},drawGraph:function(){var t=this.c[2];this.pa1.shift(),this.pa1.push(8.5+this.round(30*(1-this.fps/100))),v.setSvg(t,"d",this.makePath(this.pa1),0),this.pa2.shift(),this.pa2.push(8.5+this.round(30*(1-this.ms/200))),v.setSvg(t,"d",this.makePath(this.pa2),1),this.isMem&&(this.pa3.shift(),this.pa3.push(8.5+this.round(30*(1-this.mm))),v.setSvg(t,"d",this.makePath(this.pa3),2))},show:function(){this.h=this.hplus+this.baseH,v.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z"),null!==this.parentGroup?this.parentGroup.calc(this.hplus):this.isUI&&this.main.calc(this.hplus),this.s[0].height=this.h+"px",this.s[2].display="block",this.isShow=!0,v.addListen(this)},hide:function(){this.h=this.baseH,v.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z"),null!==this.parentGroup?this.parentGroup.calc(-this.hplus):this.isUI&&this.main.calc(-this.hplus),this.s[0].height=this.h+"px",this.s[2].display="none",this.isShow=!1,v.removeListen(this),this.c[1].textContent="FPS"},begin:function(){this.startTime=this.now()},end:function(){var t=this.now();if(this.ms=t-this.startTime,this.frames++,t>this.prevTime+1e3&&(this.fps=this.round(1e3*this.frames/(t-this.prevTime)),this.prevTime=t,this.frames=0,this.isMem)){var i=performance.memory.usedJSHeapSize,s=performance.memory.jsHeapSizeLimit;this.mem=this.round(9.54e-7*i),this.mm=i/s}return this.drawGraph(),this.c[1].innerHTML="FPS "+this.fps+'<font color="yellow"> MS '+(0|this.ms)+'</font><font color="cyan"> MB '+this.mem+"</font>",t},listening:function(){this.startTime=this.end()},rSize:function(){this.s[0].width=this.w+"px",this.s[1].width=this.w+"px",this.s[2].left="10px",this.s[2].width=this.w-20+"px"}}),r.prototype=Object.assign(Object.create(i.prototype),{constructor:r,testZone:function(t,i){if(!v.lock){if(!v.over(this,t,i))return"";var s=this.local,e=-1;return s.y<this.baseH+2?"title":this.isOpen?s.y>this.baseH+2?(e=this.findID(t,i),e!==this.current&&(this.clearTarget(),this.current=e),-1!==e&&(this.target=this.uis[this.current],this.target.uiover()),"content"):"":void 0}},clearTarget:function(){this.target&&(this.target.uiout(),this.target.reset(),this.target=null)},findID:function(t,i){for(var s=this.uis.length;s--;)if(v.over(this.uis[s],t,i))return s;return-1},reset:function(t){this.clearTarget()},click:function(t){this.target&&this.target.click(t),"title"===this.testZone(t.clientX,t.clientY)&&(this.isOpen?this.close():this.open())},mousedown:function(t){this.target&&this.target.mousedown(t)},mousemove:function(t){this.target&&this.target.mousemove(t),"title"===this.testZone(t.clientX,t.clientY)&&this.reset()},mouseup:function(t){this.target&&this.target.mouseup(t)},calcH:function(){var t,i,s=this.uis.length,e=0,h=0,o=0;for(t=0;t<s;t++)i=this.uis[t],i.autoWidth?e+=i.h+1:(0===h?e+=i.h+1:o<i.h&&(e+=i.h-o),o=i.h,(h+=i.w)+i.w>this.w&&(h=0));return e},calcUis:function(){this.isOpen&&v.calcUis(this.uis,this.zone,this.zone.y+this.baseH)},setBG:function(t){this.s[0].background=t;for(var i=this.uis.length;i--;)this.uis[i].setBG(t)},add:function(){var t=arguments;"object"==typeof t[1]?(t[1].isUI=this.isUI,t[1].target=this.c[2],t[1].main=this.main):"string"==typeof arguments[1]&&(void 0===t[2]?[].push.call(t,{isUI:!0,target:this.c[2],main:this.main}):(t[2].isUI=!0,t[2].target=this.c[2],t[2].main=this.main));var i=m.apply(this,t);return this.uis.push(i),i.autoHeight&&(i.parentGroup=this),i},open:function(){i.prototype.open.call(this),v.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z"),this.rSizeContent(),this.isUI&&this.main.calc(this.h-this.baseH)},close:function(){i.prototype.close.call(this),this.isUI&&this.main.calc(-(this.h-this.baseH)),v.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z"),this.h=this.baseH,this.s[0].height=this.h+"px"},clear:function(){this.clearGroup(),this.isUI&&this.main.calc(-(this.h+1)),i.prototype.clear.call(this)},clearGroup:function(){this.close();for(var t=this.uis.length;t--;)this.uis[t].clear(),this.uis.pop();this.uis=[],this.h=this.baseH},calc:function(t){this.isOpen&&(void 0!==t?(this.h+=t,this.isUI&&this.main.calc(t)):this.h=this.calcH()+this.baseH,this.s[0].height=this.h+"px")},rSizeContent:function(){for(var t=this.uis.length;t--;)this.uis[t].setSize(this.w),this.uis[t].rSize();this.calc()},rSize:function(){i.prototype.rSize.call(this);var t=this.s;t[3].left=this.sa+this.sb-17+"px",t[1].width=this.w+"px",t[2].width=this.w+"px",this.isOpen&&this.rSizeContent()}}),l.prototype=Object.assign(Object.create(i.prototype),{constructor:l,mode:function(t){switch(t){case 0:v.setSvg(this.c[4],"fill","url(#gradIn)"),v.setSvg(this.c[4],"stroke","#000");break;case 1:v.setSvg(this.c[4],"fill","url(#gradIn2)"),v.setSvg(this.c[4],"stroke","rgba(0,0,0,0)")}},reset:function(){this.mode(0)},mouseup:function(t){this.isDown=!1,this.interval=setInterval(this.update.bind(this),10)},mousedown:function(t){this.isDown=!0,this.mousemove(t),this.mode(2)},mousemove:function(t){if(this.mode(1),this.isDown){var i=this.radius-(t.clientX-this.zone.x-10),s=this.radius-(t.clientY-this.zone.y-this.top);if(Math.sqrt(i*i+s*s)>this.maxDistance){var e=Math.atan2(i,s);i=Math.sin(e)*this.maxDistance,s=Math.cos(e)*this.maxDistance}this.x=i/this.maxDistance,this.y=s/this.maxDistance,this.update()}},setValue:function(t,i){this.x=t||0,this.y=i||0,this.updateSVG()},update:function(t){void 0===t&&(t=!0),null!==this.interval&&(this.isDown||(this.x+=(0-this.x)/3,this.y+=(0-this.y)/3),this.x.toFixed(2)===this.oldx.toFixed(2)&&this.y.toFixed(2)===this.oldy.toFixed(2)&&(this.x=0,this.y=0)),this.updateSVG(),t&&this.send(),null!==this.interval&&0===this.x&&0===this.y&&(clearInterval(this.interval),this.interval=null)},updateSVG:function(){var t=this.x*this.maxDistance,i=this.y*this.maxDistance,s=this.radius-t,e=this.radius-i,h=s+5*(1-this.x)+5,o=e+5*(1-this.y)+10;v.setSvg(this.c[3],"cx",h),v.setSvg(this.c[3],"cy",o),v.setSvg(this.c[4],"cx",s),v.setSvg(this.c[4],"cy",e),this.oldx=this.x,this.oldy=this.y,this.value[0]=1*-(this.x*this.multiplicator).toFixed(this.precision),this.value[1]=1*(this.y*this.multiplicator).toFixed(this.precision),this.c[5].textContent="x"+this.value[0]+" y"+this.value[1]}}),c.prototype=Object.assign(Object.create(h.prototype),{constructor:c,mousemove:function(t){if(this.mode(1),this.isDown){var i=this.radius-(t.clientX-this.zone.x-10),s=this.radius-(t.clientY-this.zone.y-this.top);this.r=-Math.atan2(i,s),null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?this.oldr:this.r),this.r=this.r>this.mPI?this.mPI:this.r,this.r=this.r<-this.mPI?-this.mPI:this.r;var e=1/this.cirRange,h=(this.r+this.mPI)*e,o=this.range*h+this.min-this.old;(o>=this.step||o<=this.step)&&(o=~~(o/this.step),this.value=this.numValue(this.old+o*this.step),this.update(!0),this.old=this.value,this.oldr=this.r)}},makeGrad:function(){var t,i,s,e,h,o,n,r="",l=this.radius,c=Math.PI+this.mPI,a=Math.PI-this.mPI;this.step>5?(i=this.range/this.step,t=(c-a)/i):(t=(c-a)/l,i=l);for(var u=0;u<=i;++u)s=c-t*u,e=l+Math.sin(s)*l,h=l+Math.cos(s)*l,o=l+Math.sin(s)*(l-3),n=l+Math.cos(s)*(l-3),r+="M"+e+" "+h+" L"+o+" "+n+" ";return r},update:function(t){this.c[2].textContent=this.value,this.percent=(this.value-this.min)/this.range;var i=(this.percent*this.cirRange-this.mPI)*this.toDeg;v.setSvg(this.c[4],"transform","rotate("+i+" "+this.radius+" "+this.radius+")"),t&&this.send()}}),a.prototype=Object.assign(Object.create(i.prototype),{constructor:a,testZone:function(t){if(!v.over(this,t.clientX,t.clientY))return"";this.unSelected();var i=this.local;return i.y<this.baseH+2?"title":this.isOpen?this.scroll&&i.x>=this.sa+this.sb-20?"scroll":i.x>this.sa?this.testItems(i.y-this.baseH):"":void 0},testItems:function(t){for(var i,s,e,h="",o=this.items.length;o--;)if(i=this.items[o],s=i.posy+this.topList,e=i.posy+this.itemHeight+1+this.topList,t>=s&&t<=e)return h="item",this.currentItem=i,this.selected(),h;return h},unSelected:function(){this.currentItem&&(this.currentItem.style.background="rgba(0,0,0,0.2)",this.currentItem.style.color=v.colors.text,this.currentItem=null)},selected:function(){this.currentItem.style.background=v.colors.select,this.currentItem.style.color="#FFF"},click:function(t){"title"===this.testZone(t)&&(this.isOpen?this.close():this.open()),this.currentItem&&(this.value=this.currentItem.textContent,this.c[3].textContent=this.value,this.send(),this.close())},mouseup:function(t){this.isDown=!1},mousedown:function(t){var i=this.testZone(t);i&&("title"===i&&this.modeTitle(2),"scroll"===i&&(this.isDown=!0,this.mousemove(t)))},mousemove:function(t){var i=this.testZone(t);if(i&&("title"===i&&(this.modeTitle(1),v.cursor("pointer")),"item"===i&&(this.modeTitle(0),this.modeScroll(0),v.cursor("pointer")),"scroll"===i&&(v.cursor("s-resize"),this.modeScroll(1),this.isDown))){this.modeScroll(2);var s=this.zone.y+this.baseH-2;this.update(t.clientY-s-.5*this.sh)}},mousewheel:function(t){},reset:function(){this.modeTitle(0),this.modeScroll(0)},modeScroll:function(t){if(t!==this.sMode){switch(t){case 0:this.scroller.style.background=this.buttonColor;break;case 1:this.scroller.style.background=v.colors.select;break;case 2:this.scroller.style.background=v.colors.down}this.sMode=t}},modeTitle:function(t){if(t!==this.tMode){var i=this.s;switch(t){case 0:i[3].color=this.fontColor,i[3].background=this.buttonColor;break;case 1:i[3].color="#FFF",i[3].background=v.colors.select;break;case 2:i[3].color=this.fontColor,i[3].background=v.colors.down}this.tMode=t}},clearList:function(){for(;this.listIn.children.length;)this.listIn.removeChild(this.listIn.lastChild);this.items=[]},setList:function(t,i){this.clearList(),this.list=t,this.length=this.list.length,this.maxItem=this.full?this.length:5,this.maxItem=this.length<this.maxItem?this.length:this.maxItem,this.maxHeight=this.maxItem*(this.itemHeight+1)+2,this.max=this.length*(this.itemHeight+1)+2,this.ratio=this.maxHeight/this.max,this.sh=this.maxHeight*this.ratio,this.range=this.maxHeight-this.sh,this.c[2].style.height=this.maxHeight+"px",this.scroller.style.height=this.sh+"px",this.max>this.maxHeight&&(this.ww=this.sb-20,this.scroll=!0);for(var s,e,h=0;h<this.length;h++)e=this.list[h],s=v.dom("div",v.css.item+"width:"+this.ww+"px; height:"+this.itemHeight+"px; line-height:"+(this.itemHeight-5)+"px;"),s.textContent=e,s.style.color=this.fontColor,s.name="item"+h,s.posy=(this.itemHeight+1)*h,this.listIn.appendChild(s),this.items.push(s);void 0!==i?isNaN(i)?this.value=i:this.value=this.list[i]:this.value=this.list[0],this.c[3].textContent=this.value},update:function(t){this.scroll&&(t=t<0?0:t,t=t>this.range?this.range:t,this.topList=-Math.floor(t/this.ratio),this.listIn.style.top=this.topList+"px",this.scroller.style.top=Math.floor(t)+"px",this.py=t)},open:function(){i.prototype.open.call(this),this.update(0),this.h=this.maxHeight+this.baseH+5,this.scroll?this.scroller.style.display="block":(this.topList=0,this.h=this.baseH+5+this.max,this.scroller.style.display="none"),this.s[0].height=this.h+"px",this.s[2].display="block","up"===this.side?v.setSvg(this.c[4],"d","M 5 2 L 2 7 8 7 5 2 Z"):v.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z"),this.rSizeContent();var t=this.h-this.baseH;null!==this.parentGroup?this.parentGroup.calc(t):this.isUI&&this.main.calc(t)},close:function(){i.prototype.close.call(this);var t=this.h-this.baseH;null!==this.parentGroup?this.parentGroup.calc(-t):this.isUI&&this.main.calc(-t),this.h=this.baseH,this.s[0].height=this.h+"px",this.s[2].display="none",v.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z")},text:function(t){this.c[3].textContent=t},rSizeContent:function(){for(var t=this.length;t--;)this.listIn.children[t].style.width=this.ww+"px"},rSize:function(){i.prototype.rSize.call(this);var t=this.s,s=this.sb,e=this.sa;t[2].width=s+"px",t[2].left=e+"px",t[3].width=s+"px",t[3].left=e+"px",t[4].left=e+s-17+"px",this.ww=s,this.max>this.maxHeight&&(this.ww=s-20),this.isOpen&&this.rSizeContent()}}),u.prototype=Object.assign(Object.create(i.prototype),{constructor:u,testZone:function(t){if(!v.over(this,t.clientX,t.clientY))return"";for(var i=this.lng,s=this.tmp,e=this.local;i--;)if(e.x>s[i][0]&&e.x<s[i][2])return i},mousedown:function(t){if(!this.isSelect){var i=this.testZone(t);i&&(this.current=i,this.prev={x:t.clientX,y:t.clientY,d:0,id:this.current+2},this.isNumber?this.prev.v=parseFloat(this.value):this.prev.v=parseFloat(this.value[this.current]))}},mouseup:function(t){var i=this.testZone(t);void 0!==this.current&&this.current===i&&(t.target.contentEditable=!0,t.target.focus())},mousemove:function(t){var i=this.testZone(t);if(i&&(this.selected=i+2),void 0!==this.current){this.prev.d+=t.clientX-this.prev.x-(t.clientY-this.prev.y);var s=this.prev.v+this.prev.d*this.step;this.value[this.current]=this.numValue(s),this.c[2+this.current].textContent=this.value[this.current],this.validate(),this.prev.x=t.clientX,this.prev.y=t.clientY}},reset:function(){},setValue:function(t,i){i=i||0,this.value[i]=this.numValue(t),this.c[2+i].textContent=this.value[i]},keydown:function(t){t.stopPropagation(),13===t.keyCode&&(t.preventDefault(),this.testValue(parseFloat(t.target.name)),this.validate(),t.target.blur())},keyup:function(t){t.stopPropagation(),this.allway&&(this.testValue(parseFloat(t.target.name)),this.validate())},blur:function(t){this.isSelect=!1,t.target.style.borderColor=v.colors.border,t.target.contentEditable=!1,this.isDrag?t.target.style.cursor="move":t.target.style.cursor="pointer"},focus:function(t){this.isSelect=!0,this.current=void 0,t.target.style.borderColor=v.colors.borderSelect,this.isDrag&&(t.target.style.cursor="auto")},testValue:function(t){if(isNaN(this.c[2+t].textContent))this.c[2+t].textContent=this.value[t];else{var i=this.numValue(this.c[2+t].textContent);this.c[2+t].textContent=i,this.value[t]=i}},validate:function(){for(var t=[],i=this.lng;i--;)t[i]=this.value[i]*this.toRad;this.isNumber?this.send(t[0]):this.send(t)},rSize:function(){i.prototype.rSize.call(this),this.w=Math.floor((this.sb+5)/this.lng)-5;for(var t=this.s,s=this.lng;s--;)this.tmp[s]=[Math.floor(this.sa+this.w*s+5*s),this.w],this.tmp[s][2]=this.tmp[s][0]+this.tmp[s][1],t[2+s].left=this.tmp[s][0]+"px",t[2+s].width=this.tmp[s][1]+"px"}}),p.prototype=Object.assign(Object.create(i.prototype),{constructor:p,testZone:function(t){if(!v.over(this,t.clientX,t.clientY))return"";var i=this.local;return i.x>=this.txl?"text":i.x>=this.sa?"scroll":""},mouseup:function(t){this.isDown&&(this.isDown=!1)},mousedown:function(t){var i=this.testZone(t);"scroll"===i&&(this.isDown=!0,this.old=this.value,this.mousemove(t)),"text"===i?v.setInput(this.c[2],function(){this.validate()}.bind(this)):v.clearInput()},mousemove:function(t){var i=this.testZone(t);if("scroll"===i?(this.mode(1),v.cursor("w-resize")):"text"===i&&v.cursor("pointer"),this.isDown){var s=(t.clientX-(this.zone.x+this.sa)-3)/this.ww*this.range+this.min-this.old;(s>=this.step||s<=this.step)&&(s=Math.floor(s/this.step),this.value=this.numValue(this.old+s*this.step),this.update(!0),this.old=this.value)}},validate:function(){var t=this.c[2].textContent;isNaN(t)?this.c[2].textContent=this.value:(this.value=this.numValue(t),this.update(!0))},reset:function(){this.mode(0)},mode:function(t){var i=this.s;switch(t){case 0:i[2].color=this.fontColor,i[4].background="rgba(0,0,0,0.3)",i[5].background=this.fontColor;break;case 1:i[2].color=this.colorPlus,i[4].background="rgba(0,0,0,0.6)",i[5].background=this.colorPlus}},update:function(t){var i=Math.floor(this.ww*((this.value-this.min)/this.range));3!==this.stype&&(this.s[5].width=i+"px"),this.s[6]&&(this.s[6].left=this.sa+i+3+"px"),this.c[2].textContent=this.value,t&&this.send()},rSize:function(){i.prototype.rSize.call(this);var t=this.sb-this.sc;this.ww=t-6;var s=this.sc;!this.isUI&&this.simple||(s=this.sc+10),this.txl=this.w-s+2;var e=Math.floor(.5*this.h)-8,h=this.s;h[2].width=this.sc-2+"px",h[2].left=this.txl+"px",h[2].top=e+"px",h[3].left=this.sa+"px",h[3].width=t+"px",h[4].left=this.sa+"px",h[4].width=t+"px",h[5].left=this.sa+3+"px",this.update()}}),d.prototype=Object.assign(Object.create(i.prototype),{constructor:d,mousedown:function(t){this.activeText(!0)},keydown:function(t){13===t.keyCode?(this.activeText(!1),this.validate()):this.firstImput?(this.c[2].textContent=t.key,this.firstImput=!1):this.c[2].textContent+=t.key},keyup:function(t){this.allway&&this.validate()},rSize:function(){i.prototype.rSize.call(this);var t=this.s;t[2].color=this.fontColor,t[2].left=this.sa+"px",t[2].width=this.sb+"px",t[2].height=this.h-4+"px",t[2].lineHeight=this.h-8+"px"},validate:function(){this.value=this.c[2].textContent,this.send()},activeText:function(t){t?(this.c[2].contentEditable=!0,this.c[2].focus(),this.isEdit=!0,this.mode(1),this.firstImput=!0,v.select(this.c[2])):(this.c[2].contentEditable=!1,this.c[2].blur(),this.isEdit=!1,this.mode(0))},mode:function(t){var i=this.s;switch(t){case 0:i[2].border="1px dashed "+v.colors.hide;break;case 1:i[2].border="1px dashed "+this.fontColor}}}),f.prototype=Object.assign(Object.create(i.prototype),{constructor:f,text:function(t){this.c[1].textContent=t},text2:function(t){this.c[2].textContent=t},rSize:function(){i.prototype.rSize.call(this),this.s[1].width=this.w-50+"px",this.s[2].left=this.w-76+"px"}});g.prototype={constructor:g,setMouse:function(t){this.mouse=t},setEventCallback:function(t){v.eventCallback=t},getCorner:function(){var t=this.content.getBoundingClientRect();this.zone.x=t.left,this.zone.y=t.top},testZone:function(t){if(!v.over(this,t.clientX,t.clientY))return"";this.isReset=!1;var i="",s=this.local,e=this.isScroll?this.zone.w-this.size.s:this.zone.w,h=-1;return i=s.y>this.zone.h-this.bh?"bottom":s.x>e?"scroll":"content",v.lock||(h="content"===i?this.findID(t):-1,h!==this.current&&(this.clearTarget(),this.current=h),-1!==h&&(this.target=this.uis[this.current],this.target.uiover())),i},clearTarget:function(){this.target&&(this.target.uiout(),this.target.reset(),this.target=null,this.current=-1)},findID:function(t){for(var i=this.uis.length;i--;)if(v.over(this.uis[i],t.clientX,t.clientY))return i;return-1},setText:function(t,i,s){v.setText(t,i,s)},hide:function(t){this.content.style.display=t?"none":"block"},getHTML:function(){return this.content},onChange:function(t){return this.callback=t,this},action:function(){},click:function(t){this.target&&this.target.click(t)},mousedown:function(t){this.target&&this.target.mousedown(t);var i=this.testZone(t);i&&("scroll"===i&&(this.isDown=!0,this.mousemove(t)),"bottom"===i&&(this.isOpen=!this.isOpen,this.bottom.textContent=this.isOpen?"close":"open",this.setHeight()))},mousemove:function(t){this.target&&this.target.mousemove(t);var i=this.testZone(t);"scroll"===i&&(this.scroll.style.background=this.isDown?this.colors.down:this.colors.select,v.cursor("s-resize")),"bottom"===i&&(this.bottom.style.color="#FFF",this.bottom.style.background=this.colors.backgroundOver,v.cursor("pointer")),this.isDown&&this.update(t.clientY-this.top-.5*this.sh)},mouseup:function(t){this.target&&this.target.mouseup(t),this.isDown&&(this.isDown=!1,this.isScroll&&this.calcUis())},mousewheel:function(t){if(this.target&&this.target.mousewheel(t),!this.lockwheel&&this.isScroll){var i=t.clientX-this.zone.x;if(!(i<0||i>this.zone.w)){var s=0;t.wheelDeltaY?s=.04*-t.wheelDeltaY:t.wheelDelta?s=.2*-t.wheelDelta:t.detail&&(s=4*t.detail),this.py+=s,this.update(this.py)}}},keydown:function(t){this.target&&this.target.keydown(t)},reset:function(t){this.isReset||(this.mouse=null,v.clearInput(),this.clearTarget(),this.scroll.style.background=this.colors.scroll,this.bottom.style.background=this.colors.background,this.bottom.style.color="#CCC",v.eventCallback(t),this.isReset=!0)},add:function(){var t=arguments;"object"==typeof t[1]?(t[1].isUI=!0,t[1].main=this):"string"==typeof t[1]&&(void 0===t[2]?[].push.call(t,{isUI:!0,main:this}):(t[2].isUI=!0,t[2].main=this));var i=m.apply(this,t);if(null!==i){if(this.uis.push(i),i.autoWidth)this.prevY=-1,this.calc(i.h+1);else{var s=i.c[0].getBoundingClientRect().top;this.prevY!==s&&(this.calc(i.h+1),this.prevY=s)}return i}},calcUis:function(){v.calcUis(this.uis,this.zone,-this.decal+this.top)},remove:function(t){var i=this.uis.indexOf(t);-1!==i&&this.uis[i].clear()},clearOne:function(t){var i=this.uis.indexOf(t);-1!==i&&(this.inner.removeChild(this.uis[i].c[0]),this.uis.splice(i,1))},clear:function(){for(var t=this.uis.length;t--;)this.uis[t].clear();this.uis=[],v.listens=[],this.calc(-this.h)},update:function(t){t=t<0?0:t,t=t>this.range?this.range:t,this.decal=Math.floor(t/this.ratio),this.inner.style.top=-this.decal+"px",this.scroll.style.top=Math.floor(t)+"px",this.py=t},upScroll:function(){this.sw=this.isScroll?this.size.s:0,this.scrollBG.style.display=this.isScroll?"block":"none",this.isScroll&&(this.total=this.h,this.maxView=this.maxHeight,this.ratio=this.maxView/this.total,this.sh=this.maxView*this.ratio,this.sh<20&&(this.sh=20),this.range=this.maxView-this.sh,
this.scrollBG.style.height=this.maxView+"px",this.scroll.style.height=this.sh+"px"),this.setItemWidth(this.zone.w-this.sw),this.update(0)},resize:function(t){this.setHeight(),this.getCorner()},calc:function(t){this.h+=t,clearTimeout(this.tmp),this.tmp=setTimeout(this.setHeight.bind(this),10)},setHeight:function(){if(this.tmp&&clearTimeout(this.tmp),this.zone.h=this.bh,this.isScroll=!1,this.isOpen){var t=void 0!==this.mHeight?this.mHeight:window.innerHeight;this.maxHeight=t-this.top-this.bh,this.h>this.maxHeight?(this.isScroll=!0,this.zone.h=this.maxHeight+this.bh):this.zone.h=this.h+this.bh}this.upScroll(),this.innerContent.style.height=this.zone.h-this.bh+"px",this.content.style.height=this.zone.h+"px",this.bottom.style.top=this.zone.h-this.bh+"px",this.isOpen&&this.calcUis(),v.eventCallback()},setWidth:function(t){t&&(this.zone.w=t),this.content.style.width=this.zone.w+"px",this.isCenter&&(this.content.style.marginLeft=-~~(.5*this.zone.w)+"px"),this.setItemWidth(this.zone.w-this.sw),this.resize()},setItemWidth:function(t){for(var i=this.uis.length;i--;)this.uis[i].setSize(t),this.uis[i].rSize()}},t.Tools=v,t.Gui=g,t.Proto=i,t.Bool=s,t.Button=e,t.Circular=h,t.Color=o,t.Fps=n,t.Group=r,t.Joystick=l,t.Knob=c,t.List=a,t.Numeric=u,t.Slide=p,t.TextInput=d,t.Title=f,t.add=m,t.REVISION="1.0",Object.defineProperty(t,"__esModule",{value:!0})});
